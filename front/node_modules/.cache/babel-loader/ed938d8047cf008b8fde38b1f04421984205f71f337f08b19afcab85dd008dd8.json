{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\nfunction getToken() {\n  return localStorage.getItem('token') || '';\n}\nexport async function apiRequest(path, {\n  method = 'GET',\n  body,\n  headers = {},\n  auth = true\n} = {}) {\n  const h = {\n    ...headers\n  };\n  if (body !== undefined) {\n    h['Content-Type'] = 'application/json';\n  }\n  if (auth) {\n    const token = getToken();\n    if (token) h.Authorization = `Bearer ${token}`;\n  }\n  const res = await fetch(`${API_BASE_URL}${path}`, {\n    method,\n    headers: h,\n    body: body === undefined ? undefined : JSON.stringify(body)\n  });\n  if (!res.ok) {\n    let text = '';\n    try {\n      text = await res.text();\n    } catch (_) {\n      text = '';\n    }\n    const err = new Error(text || `Request failed: ${res.status}`);\n    err.status = res.status;\n    throw err;\n  }\n  const ct = res.headers.get('content-type') || '';\n  if (ct.includes('application/json')) {\n    return res.json();\n  }\n  return res.text();\n}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","getToken","localStorage","getItem","apiRequest","path","method","body","headers","auth","h","undefined","token","Authorization","res","fetch","JSON","stringify","ok","text","_","err","Error","status","ct","get","includes","json"],"sources":["C:/Users/yusas/Desktop/online/front/src/api/client.js"],"sourcesContent":["const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\r\n\r\nfunction getToken() {\r\n  return localStorage.getItem('token') || '';\r\n}\r\n\r\nexport async function apiRequest(path, { method = 'GET', body, headers = {}, auth = true } = {}) {\r\n  const h = { ...headers };\r\n  if (body !== undefined) {\r\n    h['Content-Type'] = 'application/json';\r\n  }\r\n  if (auth) {\r\n    const token = getToken();\r\n    if (token) h.Authorization = `Bearer ${token}`;\r\n  }\r\n\r\n  const res = await fetch(`${API_BASE_URL}${path}`, {\r\n    method,\r\n    headers: h,\r\n    body: body === undefined ? undefined : JSON.stringify(body),\r\n  });\r\n\r\n  if (!res.ok) {\r\n    let text = '';\r\n    try {\r\n      text = await res.text();\r\n    } catch (_) {\r\n      text = '';\r\n    }\r\n    const err = new Error(text || `Request failed: ${res.status}`);\r\n    err.status = res.status;\r\n    throw err;\r\n  }\r\n\r\n  const ct = res.headers.get('content-type') || '';\r\n  if (ct.includes('application/json')) {\r\n    return res.json();\r\n  }\r\n  return res.text();\r\n}\r\n"],"mappings":"AAAA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAE7E,SAASC,QAAQA,CAAA,EAAG;EAClB,OAAOC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;AAC5C;AAEA,OAAO,eAAeC,UAAUA,CAACC,IAAI,EAAE;EAAEC,MAAM,GAAG,KAAK;EAAEC,IAAI;EAAEC,OAAO,GAAG,CAAC,CAAC;EAAEC,IAAI,GAAG;AAAK,CAAC,GAAG,CAAC,CAAC,EAAE;EAC/F,MAAMC,CAAC,GAAG;IAAE,GAAGF;EAAQ,CAAC;EACxB,IAAID,IAAI,KAAKI,SAAS,EAAE;IACtBD,CAAC,CAAC,cAAc,CAAC,GAAG,kBAAkB;EACxC;EACA,IAAID,IAAI,EAAE;IACR,MAAMG,KAAK,GAAGX,QAAQ,CAAC,CAAC;IACxB,IAAIW,KAAK,EAAEF,CAAC,CAACG,aAAa,GAAG,UAAUD,KAAK,EAAE;EAChD;EAEA,MAAME,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGlB,YAAY,GAAGQ,IAAI,EAAE,EAAE;IAChDC,MAAM;IACNE,OAAO,EAAEE,CAAC;IACVH,IAAI,EAAEA,IAAI,KAAKI,SAAS,GAAGA,SAAS,GAAGK,IAAI,CAACC,SAAS,CAACV,IAAI;EAC5D,CAAC,CAAC;EAEF,IAAI,CAACO,GAAG,CAACI,EAAE,EAAE;IACX,IAAIC,IAAI,GAAG,EAAE;IACb,IAAI;MACFA,IAAI,GAAG,MAAML,GAAG,CAACK,IAAI,CAAC,CAAC;IACzB,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVD,IAAI,GAAG,EAAE;IACX;IACA,MAAME,GAAG,GAAG,IAAIC,KAAK,CAACH,IAAI,IAAI,mBAAmBL,GAAG,CAACS,MAAM,EAAE,CAAC;IAC9DF,GAAG,CAACE,MAAM,GAAGT,GAAG,CAACS,MAAM;IACvB,MAAMF,GAAG;EACX;EAEA,MAAMG,EAAE,GAAGV,GAAG,CAACN,OAAO,CAACiB,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;EAChD,IAAID,EAAE,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAE;IACnC,OAAOZ,GAAG,CAACa,IAAI,CAAC,CAAC;EACnB;EACA,OAAOb,GAAG,CAACK,IAAI,CAAC,CAAC;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}